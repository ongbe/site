---
layout: docs
title: 掘金SDK简介
next_section: quickstart
permalink: /docs/gmsdk_intro/
---

掘金量化交易平台（以下简称掘金）SDK是深圳红树科技为广大宽客、量化策略师量身定制的一套策略开发接口，包括数据服务、交易服务、策略运行监控管理等策略开发必备的核心功能。

掘金SDK以简单、易用、高性能为设计目标，并专门针对量化交易优化。提供强大的跨语言、跨平台支持，覆盖所有主流开发语言和操作系统。接口风格和消息设计上，遵循国际标准，兼容FIX协议定义。

目前SDK主要支持期货，后续将陆续支持期权和股票。

另外，我们在互联网部署了全套的公共后台服务：

- 股票，期货，期权实时行情
- 7 x 24小时不间断的模拟实时行情
- 在线回放历史行情
- 高仿真模拟实时交易服务
- 实时风控服务
- 实时绩效运算服务

方便大家随时随地免费接入，全天候进行策略开发、调试、回验和paper trading，不再受到交易时间的限制，以最高的效率保证策略快速上线实盘.

对于机构版客户，还可以在内部环境中部署历史数据的回放服务，方便反复回验策略模型。


## 掘金SDK支持的开发语言和操作系统

掘金SDK目前支持C, C++, `C#`, Python, Matlab, R, Javascript 共7种语言，大家可以选择自己最熟悉、最趁手的语言来开发策略。7种开发语言支持的功能均完整一致，API风格统一，并有完善的开发文档和示例程序，方便快速上手。

SDK同时支持Windows和Linux操作系统，各操作系统支持的语言如下：

- Windows： C, C++, `C#`, Python, `Matlab`, R, Javascript
- Linux： C, C++, Python, R


## 关于开发工具

掘金SDK不限制您使用任何特定的开发工具，您完全可以选择任意自己熟悉的开发工具链。常见的开发工具链比如：

- C，C++语言： vc++, gcc, eclipse cdt
- C#语言: visual studio, mono
- Python: pycharm, pydev, 或任何文本编辑器即可
- R: GNU R环境或其他文本编辑器，如Emacs + ESS
- Matlab: matlab


## 掘金SDK涵盖的功能范围

掘金SDK主要涵盖三部分服务：

1. 量化交易依赖的数据服务，包括：
	- 实时行情(tick, 标准bar, 自定义周期bar, 逐笔交易trade数据）推送
	- 模拟实时行情，7x24小时循环推送指定时间段的历史tick和bar数据
	- 历史数据提取（tick, bar, trade等数据提取）
	- 静态数据查询（合约，symbol等）
2. 量化交易接口， 包括：
    - 下单，各种快速下单接口
    - 撤单
    - 查单
    - 查资金账户
    - 查持仓
    - 实时交易事件： 委托执行回报事件，订单状态变更事件（订单被接受、成交、部分成交、拒绝等）
3. 量化策略的运行监控管理接口， 包括：
    - 策略启动
    - 策略停止
    - 策略初始化
    - 策略错误事件

三部分彼此独立，既可以一起使用，典型如策略，同时用到以上各接口；也可以各自独立使用，使用部分接口做研究，分析，或用于工具开发。策略编写者可以根据自己的实际需要灵活选择。

完整使用SDK能够最大限度地发挥掘金量化交易平台的整体优势，充分利用平台对量化策略的开发编写、调试、模拟测试、产品化运行管理的全生命周期的完整支持。

## 掘金SDK相关约定
### 策略ID
策略ID是策略的唯一身份识别符，用户使用掘金平台创建策略时会生成该ID，策略登录时必须输入策略ID。策略ID由字符串构成，通常是GUID，比如策略的配置文档或初始化参数中的策略ID： 

`strategy_id = d0606f89-f54c-44c9-ba3a-704605a52e14`

### 请求类型和时序
#### 异步请求
发出请求后立即返回，不等待请求结果。下单，撤单，实时行情订阅属于此类请求，请求的回应通过实时推送的方式返回数据，以事件或回调的形式通知调用者。

#### 回应推送
对应异步请求，SDK在收到异步请求的结果、行情及订单状态的实时推送时，触发事件通知调用者。

#### 事件时序

##### 行情事件

- 当tick, bar无依赖关系时，按各自时间序推送
- 对于构成bar的最后一个tick,在该bar之前进行推送。也就是对应的数据会先触发on_tick事件，再触发on_bar事件。
- 如果同一时间点触发多个周期的bar, 则从短周期到长周期的顺序依次推送bar。比如到整点时，1m, 15m, 30m, 60m等标准周期bar会依次推送。

```
on_tick -> on_bar
```

##### 交易事件

- 下单：总是先收到订单执行回报（on_execrpt事件)，然后再收到订单状态变更(on_order...系列事件)，订单状态的变更时序如下：

```
on_order_rejected
on_order_new -> on_order_filled
on_order_new -> on_order_partially_filled -> on_order_filled
on_order_new -> on_order_partially_filled -> on_order_expired
on_order_new -> on_order_partially_filled -> on_order_stop_executed
on_order_new -> on_order_rejected
on_order_new -> on_order_stop_executed
on_order_new -> on_order_cancelled
on_order_new -> on_order_partially_filled -> on_order_cancelled
```

- 撤单：总是先收到先收到撤单回报（on_execrpt);如果撤单成功，接下来会收到订单状态变更; 如果撤单失败，收到撤单被拒绝的回应。

```
on_order_cancel_rejected
on_order_cancelled
```

#### 同步请求
各种数据查询请求均是同步请求，API在收到请求结果后才返回给调用者。比如：查订单，查资金，查持仓等。


### 特殊参数格式约定
以下是常见的几类特殊类型的参数格式约定，API如果有此类参数均符合本约定：


服务连接字符串定义服务的连接方式，比如：

```ini
行情服务连接字符串： md_addr=cloud.myquant.cn:8000
交易服务连接字符串： td_addr=cloud.myquant.cn:8001
```


##### symbol参数

symbol用来定义交易单元的唯一ID，在掘金系统中由**交易所+合约号/证券号**构成，格式为 `交易所名.合约号/证券号`，几个例子：

```
CFFEX.IF1406
SHFE.AG1311
```

函数调用实例

``` python
open_long("CFFEX.IF1406", 2206, 1);  # 开多`CFFEX.IF1406` 1手，限价单，价格为2206
```

##### 日期时间参数

参数中的日期时间，都采用字符串格式定义，格式遵循定义： `YYYY-mm-DD HH:MM:SS`

函数调用实例

``` python
get_ticks("CFFEX.IF1406", "2014-02-25 09:30:00", "2014-02-25 12:00:00"); # 提取指定区间历史tick数据
```

##### 行情订阅symbol格式

掘金SDK提供最为灵活的行情订阅方式，通过强大的通配符支持，您可以轻松的订阅自己想要的任意行情数据组合。

```
symbol_list 订阅代码表,参数格式如下：

订阅串有三节或四节组成,用'.'分隔，分别对应交易所exchange.代码code.数据类型data_type.周期类型bar_type

只有订阅bar数据时, 才用到第四节, 周期类型才有作用
交易所exchange统一四个字节: CFFEX-中金所 SHFE-上期所 DCE-大商所 CZCE-郑商所

支持6种格式的订阅,使用如下:

    *    CFFEX.IF1403.*      : 中金所,IF1403,所有数据
    *    CFFEX.IF1403.tick   : 中金所,IF1403, tick数据
    *    CFFEX.IF1403.trade  : 中金所,IF1403, trade数据
    *    CFFEX.IF1403.bar.60 : 中金所,IF1403, 1分钟(60秒)Bar数据
    *    CFFEX.IF1403.*,CFFEX.IF1312.* : 中金所,IF1403和IF1312所有数据(订阅多个代码)
```

#### 掘金SDK关键API接口

本节介绍关键的API接口，主要包括5个类：策略基类，实时行情， 历史数据提取，历史行情回放，交易。策略基类汇集了其他4个类的功能接口，以便于策略编写时灵活的调取数据、下单和接收执行回报等。另一方面，以上几个类也可以各自独立使用，比如单独使用实时行情接口，单独使用历史数据接口，单独回放历史行情，单独调用交易下单或查询接口等。

#### 测试服务地址

为方便策略开发和测试，以下服务在公网开放访问。真实交易时将配置切换到自己的服务地址即可，代码不用作任何修改，开发、测试和生产3个环境可以无缝迁移。地址如有变更，请查询官网通知: http://www.myquant.cn

```
实时行情服务: cloud.myquant.cn:8000
模拟交易服务: cloud.myquant.cn:8001
```
